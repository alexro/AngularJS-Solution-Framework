"use strict";angular.module("app",["app.storage","app.page","app.form","app.table","app.filter"]).run(function(){console.log("app started")}),angular.module("app.page",[]).run(function(){console.log("app.page started")}).controller("PageController",["$scope","Storage",function(){}]),angular.module("app.storage",[]).run(function(){console.log("app.storage started")}).factory("Storage",["$rootScope",function(a){var b={};return b.data=[],b.filter="",b.add=function(c,d,e){var f={text:c,num:d,date:e};b.data.push(f),a.$broadcast(b.UPDATED,{reason:b.REASON_ADD,data:f})},b.getData=function(){return b.data},b.setFilter=function(c){b.currentFilter=c,a.$broadcast(b.UPDATED,{reason:b.REASON_FILTER,data:c})},b.UPDATED="UPDATED",b.REASON_ADD="REASON_ADD",b.REASON_FILTER="REASON_FILTER",{add:b.add,getData:b.getData,setFilter:b.setFilter,UPDATED:b.UPDATED,REASON_ADD:b.REASON_ADD,REASON_FILTER:b.REASON_FILTER}}]),angular.module("app.filter",[]).run(function(){console.log("app.filter started")}).directive("appFilter",["Storage",function(a){return{restrict:"E",scope:{},templateUrl:function(){return"/app/components/filter/app.filter.html"},controller:["$scope",function(b){b.apply=function(){a.setFilter(b.filterData)}}]}}]),angular.module("app.form",[]).run(function(){console.log("app.form started")}).directive("appForm",["Storage",function(a){return{restrict:"E",scope:{},templateUrl:"app/components/form/app.form.html",controller:["$scope",function(b){b.add=function(){a.add(b.textData,b.numData,b.dateData),delete b.textData,delete b.numData,delete b.dateData}}]}}]),angular.module("app.table",[]).run(function(){console.log("app.table started")}).directive("appTable",["Storage",function(a){return{restrict:"E",scope:{},templateUrl:function(){return"/app/components/table/app.table.html"},controller:["$scope",function(b){b.so={},b.sort=function(a){b.so[a+"Order"]=b.so[a+"Order"]&&"ASC"==b.so[a+"Order"]?"DESC":"ASC",b.so.sortColumn=a,b.so.sortOrder=b.so[a+"Order"],b.sortData()},b.sortData=function(){b.so.sortColumn&&b.data.sort(function(a,c){return"text"==b.so.sortColumn?a[b.so.sortColumn]==c[b.so.sortColumn]?0:"ASC"==b.so.sortOrder?a[b.so.sortColumn]>c[b.so.sortColumn]?1:-1:a[b.so.sortColumn]>c[b.so.sortColumn]?-1:1:"ASC"==b.so.sortOrder?a[b.so.sortColumn]-c[b.so.sortColumn]:c[b.so.sortColumn]-a[b.so.sortColumn]})},b.$on(a.UPDATED,function(c,d){if(d.reason==a.REASON_ADD)b.data=a.getData(),b.sortData();else if(d.reason==a.REASON_FILTER){var e=d.data;if(e&&""!=e){var f=[];a.getData().map(function(a){a.text.indexOf(e)>=0?f.push(a):a.num==+e?f.push(a):(a.date+"").indexOf(e)>=0&&f.push(a)}),b.data=f,b.sortData()}else b.data=a.getData(),b.sortData()}})}]}}]);